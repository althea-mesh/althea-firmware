language:
  - c
  - python
  - rust
rust:
  - nightly
cache:
  - ccache
  - pip
  - cargo
install:
  - sudo apt-get install python-pip
  - sudo pip install ansible
  - sudo pip install ansible-lint

sudo: required

env:
  - DEVICE=n600.yml PROFILE=althea-test-deployments.yml
  - DEVICE=n600.yml PROFILE=enthusiast.yml
  - DEVICE=n750.yml PROFILE=althea-test-deployments.yml
  - DEVICE=n750.yml PROFILE=enthusiast.yml
  - DEVICE=virtualbox.yml PROFILE=althea-test-deployments.yml
  - DEVICE=virtualbox.yml PROFILE=enthusiast.yml

script:
  - ansible-lint -x ANSIBLE0012,ANSIBLE0013,ANSIBLE0006 *.yml
  - ansible-playbook first-time-setup.yml
  - ansible-playbook -e @profiles/devices/$DEVICE -e @profiles/management/$PROFILE -e ci=True firmware-build.yml
